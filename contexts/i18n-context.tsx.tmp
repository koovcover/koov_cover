'use client'

import { createContext, useContext, useEffect, useState } from 'react'

type Language = 'es' | 'en' | 'pt-BR'

interface I18nContextType {
  language: Language
  setLanguage: (lang: Language) => void
  t: (key: string) => string
}

const I18nContext = createContext<I18nContextType>({
  language: 'es',
  setLanguage: () => {},
  t: key => key
})

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>('es')

  useEffect(() => {
    const savedLanguage = localStorage.getItem('koov-language') as Language
    if (savedLanguage) {
      setLanguage(savedLanguage)
    }
  }, [])

  useEffect(() => {
    localStorage.setItem('koov-language', language)
  }, [language])

  const t = (key: string): string => {
    const translations = {
      'pt-BR': {
        // ... las traducciones en portugués
      },
      es: {
        // Header
        'nav.benefits': 'Beneficios',
        'nav.howItWorks': 'Cómo Funciona',
        'nav.questions': 'Preguntas',
        'nav.contact': 'Contacto',
        'nav.contactUs': 'Contáctanos',
        
        // Hero
        'hero.title': 'TU MOTO SIEMPRE LIMPIA Y PROTEGIDA',
        'hero.subtitle': 'Garaje portátil plegable que cuida tu moto del sol, la lluvia y el polvo.',
        'hero.highlight': 'Diseñado en Perú para proteger tu moto en cualquier lugar',
        'hero.feature1': 'Rápido de usar',
        'hero.feature2': 'Diseño portátil',
        'hero.feature3': 'Protección total',
        'hero.cta': 'Protege tu moto ahora',
        'hero.seeBenefits': 'Ver beneficios →',
        
        // Why Koov
        'why.title': '¿Por qué elegir KOOV COVER?',
        'why.subtitle': 'Diseñado específicamente para motociclistas que buscan protección práctica y eficiente',
        
        // Benefits
        'benefits.title': 'Beneficios',
        'benefits.subtitle': 'Protección completa para tu motocicleta',
        'benefits.weather.title': 'Protección contra clima',
        'benefits.weather.description': 'Protege tu moto del sol, lluvia y polvo',
        'benefits.maintenance.title': 'Fácil mantenimiento',
        'benefits.maintenance.description': 'Material duradero y fácil de limpiar',
        'benefits.portability.title': 'Portátil',
        'benefits.portability.description': 'Ligero y plegable para fácil transporte',
        'benefits.storage.title': 'Almacenamiento eficiente',
        'benefits.storage.description': 'Ocupa poco espacio cuando está plegado',
        'benefits.time.title': 'Rápido de usar',
        'benefits.time.description': 'Instalación y remoción en minutos',
        'benefits.quality.title': 'Alta calidad',
        'benefits.quality.description': 'Materiales premium y acabado superior',
        
        // WhatsApp Float
        'whatsapp.aria': 'Contactar por WhatsApp',
        'whatsapp.message': 'Hola, quiero más información sobre KOOV COVER',

        // Traditional Comparison
        'comparison.title': 'Comparación: Protector Tradicional vs KOOV COVER',
        'comparison.subtitle': 'Análisis detallado de experiencia de usuario en situaciones cotidianas del motociclista limeño',
        'comparison.situation': 'SITUACIÓN',
        'comparison.traditional': 'PROTECTOR TRADICIONAL',
        'comparison.koov': 'KOOV COVER',
        'comparison.benefit': 'BENEFICIO REAL',
        'comparison.morning.title': 'Experiencia matutina (prisa)',
        'comparison.morning.traditional': 'Quitar funda, doblar, ensuciar manos, buscar dónde dejarla',
        'comparison.morning.koov': 'Abrir puerta, arrancar, partir limpio',
        'comparison.morning.impact': 'Ahorras 3-5 minutos diarios + sin estrés',
        'comparison.weather.title': 'Protección en clima húmedo',
        'comparison.weather.traditional': 'Condensación atrapada, olor a humedad, tela pegajosa',
        'comparison.weather.koov': 'Ambiente seco controlado, ventilación adecuada',
        'comparison.weather.impact': 'Menos óxido, mejor conservación de partes metálicas',
        'comparison.maintenance.title': 'Mantenimiento y limpieza',
        'comparison.maintenance.traditional': 'Polvo adherido, manchas permanentes, deterioro visible',
        'comparison.maintenance.koov': 'Limpieza ocasional, aspecto profesional constante',
        'comparison.maintenance.impact': 'Mantiene valor de reventa de tu motocicleta',
        'comparison.daily.title': 'Uso diario habitual',
        'comparison.daily.traditional': 'Cargar bulto húmedo/sucio, buscar dónde guardarlo',
        'comparison.daily.koov': 'Acceso directo sin manipular materiales',
        'comparison.daily.impact': 'Zero complicaciones, máxima practicidad',
        'comparison.conclusion.title': 'Resultado: Una experiencia completamente diferente',
        'comparison.conclusion.subtitle': 'KOOV COVER no es una "funda mejorada" - es una solución integral diseñada por peruanos para peruanos',
        'comparison.stats.time': '5 MIN',
        'comparison.stats.time.desc': 'Ahorras diario',
        'comparison.stats.life': '3+ AÑOS',
        'comparison.stats.life.desc': 'Vida útil garantizada',
        'comparison.stats.hassle': 'CERO',
        'comparison.stats.hassle.desc': 'Complicaciones diarias',
        'comparison.cta': 'Experimenta la diferencia',

        // Location
        'location.title': 'Nuestra oficina',
        'location.subtitle': 'Av. Colonial 3046, Cercado de Lima',

        // FAQ
        'faq.title': 'Preguntas frecuentes',
        'faq.subtitle': 'Resolvemos las dudas más comunes sobre KOOV COVER',
        'faq.1.question': '¿Protege contra lluvia intensa y polvo fino?',
        'faq.1.answer': 'Sí, KOOV COVER está diseñado con materiales impermeables de alta calidad que protegen completamente contra lluvia intensa, polvo fino y rayos UV. Su diseño hermético garantiza que tu moto permanezca completamente seca y limpia.',
        'faq.2.question': '¿Cuánto tiempo toma desplegarlo?',
        'faq.2.answer': 'El proceso de despliegue toma entre 3 a 5 minutos. Gracias a su diseño intuitivo y sistema de plegado optimizado, cualquier persona puede armarlo rápidamente sin necesidad de herramientas especiales o experiencia previa.',
        'faq.3.question': '¿Necesita instalación fija?',
        'faq.3.answer': 'No, KOOV COVER es completamente portátil. No requiere instalación permanente, tornillos o modificaciones en el suelo. Puedes moverlo fácilmente a cualquier ubicación según tus necesidades.',
        'faq.4.question': '¿Sirve para espacios reducidos?',
        'faq.4.answer': 'Absolutamente. KOOV COVER está especialmente diseñado para espacios urbanos limitados como patios pequeños, azoteas, estacionamientos de departamentos y áreas compactas donde las cocheras tradicionales no son viables.',
        'faq.5.question': '¿Cómo se limpia y mantiene?',
        'faq.5.answer': 'El mantenimiento es muy sencillo. Solo necesitas limpiar la superficie con agua y jabón suave ocasionalmente. Los materiales son resistentes a la intemperie y no requieren tratamientos especiales o mantenimiento complejo.',
        'faq.6.question': '¿Hacen envíos a todo el Perú?',
        'faq.6.answer': 'Sí, realizamos envíos a nivel nacional. Contamos con cobertura en todas las principales ciudades del Perú. Los tiempos de entrega varían según la ubicación, pero generalmente oscilan entre 2 a 7 días hábiles.',

        // Footer 
        'footer.rights': 'Todos los derechos reservados',
        'footer.designed': 'Diseñado en Perú',
      },
      en: {
        // ... traducciones en inglés
      }
    }

    return translations[language][key as keyof typeof translations[typeof language]] || key
  }

  return (
    <I18nContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </I18nContext.Provider>
  )
}

export function useI18n() {
  const context = useContext(I18nContext)
  if (!context) {
    throw new Error('useI18n must be used within an I18nProvider')
  }
  return context
}

export { type I18nContextType }